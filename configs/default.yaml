# quorum-ai Default Configuration
# Copy this file to .quorum.yaml in your project root

# Logging configuration
log:
  # Log level: debug, info, warn, error
  level: info
  # Output format: auto (detect TTY), text, json
  format: auto
  # Optional log file path (empty = stdout only)
  file: ""

# Trace configuration
trace:
  # Trace mode: off, summary, full
  mode: off
  # Directory for trace artifacts
  dir: .quorum/traces
  # Trace schema version
  schema_version: 1
  # Redact sensitive values in traces
  redact: true
  # Regex patterns to redact (empty uses built-in defaults)
  redact_patterns: []
  # Regex allowlist to skip redaction
  redact_allowlist: []
  # Max bytes per trace file
  max_bytes: 262144
  # Max total bytes per run
  total_max_bytes: 10485760
  # Max number of files per run
  max_files: 500
  # Phases to include in tracing
  include_phases: [optimize, analyze, consensus, plan, execute]

# Workflow execution settings
workflow:
  # Maximum workflow execution time
  timeout: 12h
  # Maximum duration per standalone phase command
  phase_timeouts:
    analyze: 2h
    plan: 2h
    execute: 2h
  # Maximum retry attempts per task
  max_retries: 3
  # Dry-run mode (simulate without executing)
  dry_run: false
  # Sandbox mode restricts operations that could modify the system.
  # Set to false only when you trust the workflow to make changes.
  sandbox: true
  # Tools to deny during execution
  deny_tools: []

# Agent configuration
agents:
  # Default agent for analysis tasks
  default: claude

  # Claude Code CLI configuration
  claude:
    enabled: true
    # Path to claude CLI executable
    path: claude
    # Default model (fallback when phase not specified)
    model: claude-opus-4-5-20251101
    # Per-phase model overrides (optimize/analyze/plan/execute)
    phase_models:
      optimize: claude-opus-4-5-20251101
      analyze: claude-opus-4-5-20251101
      plan: claude-opus-4-5-20251101
      execute: claude-opus-4-5-20251101
    # Maximum output tokens
    max_tokens: 4096
    # Temperature (0.0-2.0)
    temperature: 0.7

  # Gemini CLI configuration
  gemini:
    enabled: true
    path: gemini
    model: gemini-3-flash-preview
    # Per-phase model overrides (optimize/analyze/plan/execute)
    phase_models:
      optimize: gemini-3-pro-preview
      analyze: gemini-3-pro-preview
      plan: gemini-3-pro-preview
      execute: gemini-3-flash-preview
    max_tokens: 4096
    temperature: 0.7

  # OpenAI Codex CLI configuration
  # Note: reasoning_effort is configured per-phase in the adapter code
  # optimize/analyze/plan use "xhigh" (extra high), execute uses "high"
  codex:
    enabled: true
    path: codex
    # Default model (fallback when phase not specified)
    model: gpt-5.2-codex
    # Per-phase model overrides (optimize/analyze/plan/execute)
    phase_models:
      optimize: gpt-5.2-codex
      analyze: gpt-5.2-codex
      plan: gpt-5.2-codex
      execute: gpt-5.2-codex
    max_tokens: 4096
    temperature: 0.7

  # GitHub Copilot CLI configuration (optional)
  # Uses the standalone `copilot` CLI (npm install -g @github/copilot)
  # Note: Requires GitHub Copilot Pro/Pro+/Business/Enterprise subscription
  copilot:
    enabled: false
    path: copilot
    # Default model (fallback when phase not specified)
    model: claude-sonnet-4-5
    # Per-phase model overrides (optimize/analyze/plan/execute)
    # Available models: claude-sonnet-4-5 (default), claude-sonnet-4, gpt-5
    phase_models:
      optimize: claude-sonnet-4-5
      analyze: claude-sonnet-4-5
      plan: claude-sonnet-4-5
      execute: claude-sonnet-4-5
    max_tokens: 16384
    temperature: 0.7

# Prompt optimizer configuration
# Optimizes the user prompt before analysis for better LLM effectiveness
prompt_optimizer:
  # Enable/disable prompt optimization phase
  enabled: true
  # Agent to use for optimization (claude, gemini, codex, copilot)
  agent: claude
  # Model override (optional, uses agent's phase_models.optimize or default if empty)
  model: ""

# Analysis consolidator configuration
# Synthesizes multiple agent analyses into a single coherent report
analysis_consolidator:
  # Agent to use for consolidation (claude, gemini, codex, copilot)
  agent: claude
  # Model override (optional, uses agent's phase_models.analyze or default if empty)
  model: claude-opus-4-5-20251101

# State persistence configuration
state:
  # Path to state file (relative to project root)
  path: .quorum/state/state.json
  # Path to backup file
  backup_path: .quorum/state/state.json.bak
  # Lock file TTL before considered stale
  lock_ttl: 1h

# Git configuration
git:
  # Directory for git worktrees
  worktree_dir: .worktrees
  # Auto-cleanup completed worktrees
  auto_clean: true
  # When to create worktrees: always, parallel, disabled
  worktree_mode: parallel

# GitHub integration
github:
  # GitHub token (prefer GITHUB_TOKEN env var)
  token: ""
  # Remote name
  remote: origin

# Consensus configuration (80/60/50 escalation policy)
consensus:
  # Minimum consensus score to proceed (0.0-1.0)
  threshold: 0.80
  # Threshold for V2 critique escalation (score below this triggers V2+V3)
  v2_threshold: 0.60
  # Threshold for human review (score below this aborts workflow)
  human_threshold: 0.50
  # Category weights for Jaccard similarity
  weights:
    # Weight for claims/findings (40%)
    claims: 0.40
    # Weight for risks/concerns (30%)
    risks: 0.30
    # Weight for recommendations (30%)
    recommendations: 0.30

# Cost limits
costs:
  # Maximum USD per workflow (0 = unlimited)
  max_per_workflow: 10.0
  # Maximum USD per task (0 = unlimited)
  max_per_task: 2.0
  # Alert threshold (warn when approaching limit)
  alert_threshold: 0.80
