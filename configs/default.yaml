# quorum-ai Default Configuration
# Copy this file to .quorum.yaml in your project root

# Logging configuration
log:
  # Log level: debug, info, warn, error
  level: info
  # Output format: auto (detect TTY), text, json
  format: auto
  # Optional log file path (empty = stdout only)
  file: ""

# Trace configuration
trace:
  # Trace mode: off, summary, full
  mode: off
  # Directory for trace artifacts
  dir: .quorum/traces
  # Trace schema version
  schema_version: 1
  # Redact sensitive values in traces
  redact: true
  # Regex patterns to redact (empty uses built-in defaults)
  redact_patterns: []
  # Regex allowlist to skip redaction
  redact_allowlist: []
  # Max bytes per trace file
  max_bytes: 262144
  # Max total bytes per run
  total_max_bytes: 10485760
  # Max number of files per run
  max_files: 500
  # Phases to include in tracing
  include_phases: [refine, analyze, plan, execute]

# Workflow execution settings
workflow:
  # Maximum workflow execution time
  timeout: 12h
  # Maximum retry attempts per task
  max_retries: 3
  # Dry-run mode (simulate without executing)
  dry_run: false
  # Sandbox mode restricts operations that could modify the system.
  # Set to false only when you trust the workflow to make changes.
  sandbox: true
  # Tools to deny during execution
  deny_tools: []

# Phase configuration
phases:
  # Analyze phase settings
  analyze:
    # Maximum duration for analyze phase
    timeout: 2h
    # Prompt refiner (optional) - enhances user prompt before analysis
    refiner:
      enabled: true
      # Agent to use for refinement
      agent: claude
      # Model override (optional, defaults to agent's phase_models.refine)
      # model: claude-opus-4-5-20251101
    # Analysis synthesizer - consolidates multi-agent analyses
    synthesizer:
      # Agent to use for synthesis
      agent: claude
      # Model override (optional, defaults to agent's phase_models.analyze)
      # model: claude-opus-4-5-20251101
    # Semantic moderator for multi-agent consensus evaluation
    moderator:
      enabled: true
      # Agent to use for moderation
      agent: claude
      # Model override (optional, defaults to agent's phase_models.analyze)
      # model: claude-opus-4-5-20251101
      # Minimum consensus score to accept (0.0-1.0)
      threshold: 0.90
      # Minimum refinement rounds before accepting consensus
      min_rounds: 2
      # Maximum refinement rounds before giving up
      max_rounds: 5
      # Score below which to abort workflow
      abort_threshold: 0.30
      # Score change below which is considered stagnation
      stagnation_threshold: 0.02
  # Plan phase settings
  plan:
    # Maximum duration for plan phase
    timeout: 1h
    # Plan synthesizer - when enabled, all agents with plan phase enabled
    # propose plans in parallel, then synthesizer consolidates them.
    # When disabled (default), uses single-agent planning with the default agent.
    synthesizer:
      enabled: false
      # Agent to use for plan synthesis
      agent: claude
      # Model override (optional, defaults to agent's phase_models.plan)
      # model: claude-opus-4-5-20251101
  # Execute phase settings
  execute:
    # Maximum duration for execute phase
    timeout: 2h

# Agent configuration
# Note: temperature and max_tokens are omitted - let each CLI use its optimized defaults
agents:
  # Default agent for analysis tasks
  default: claude

  # Claude Code CLI configuration
  claude:
    enabled: true
    path: claude
    # Default model
    model: claude-opus-4-5-20251101
    # Per-task model overrides. Only specify phases that need a different model.
    # Unspecified phases use the default model above.
    phase_models:
      refine: claude-opus-4-5-20251101
      analyze: claude-opus-4-5-20251101
      moderate: claude-opus-4-5-20251101
      synthesize: claude-opus-4-5-20251101
      plan: claude-opus-4-5-20251101
      execute: claude-opus-4-5-20251101

  # Gemini CLI configuration
  gemini:
    enabled: true
    path: gemini
    model: gemini-3-flash-preview
    phase_models:
      refine: gemini-3-pro-preview
      analyze: gemini-3-pro-preview
      moderate: gemini-3-pro-preview
      synthesize: gemini-3-pro-preview
      plan: gemini-3-pro-preview
      execute: gemini-3-flash-preview

  # OpenAI Codex CLI configuration
  codex:
    enabled: true
    path: codex
    model: gpt-5.2-codex
    # Codex-specific: default reasoning effort (minimal/low/medium/high/xhigh)
    reasoning_effort: high
    phase_models:
      refine: gpt-5.2-codex
      analyze: gpt-5.2-codex
      moderate: gpt-5.2-codex
      synthesize: gpt-5.2-codex
      plan: gpt-5.2-codex
      execute: gpt-5.2-codex
    # Per-phase reasoning effort overrides (optional)
    reasoning_effort_phases:
      refine: xhigh
      analyze: xhigh
      plan: xhigh

  # GitHub Copilot CLI configuration (optional)
  # Uses the standalone `copilot` CLI (npm install -g @github/copilot)
  # Note: Requires GitHub Copilot Pro/Pro+/Business/Enterprise subscription
  copilot:
    enabled: false
    path: copilot
    model: claude-sonnet-4-5
    # Available models: claude-sonnet-4-5 (default), claude-sonnet-4, gpt-5
    phase_models:
      refine: claude-sonnet-4-5
      analyze: claude-sonnet-4-5
      moderate: claude-sonnet-4-5
      synthesize: claude-sonnet-4-5
      plan: claude-sonnet-4-5
      execute: claude-sonnet-4-5

# State persistence configuration
state:
  # Storage backend: "json" (default, file-based) or "sqlite" (database)
  backend: json
  # Path to state file (for json: .json file, for sqlite: .db file)
  path: .quorum/state/state.json
  # Path to backup file
  backup_path: .quorum/state/state.json.bak
  # Lock file TTL before considered stale
  lock_ttl: 1h

# Git configuration
git:
  # Directory for git worktrees
  worktree_dir: .worktrees
  # Auto-cleanup completed worktrees
  auto_clean: true
  # When to create worktrees: always, parallel, disabled
  worktree_mode: parallel
  # Task finalization: commit, push, and PR creation
  # Each task runs in its own branch. After completion:
  # Commit changes after each task completes
  auto_commit: true
  # Push the task branch to remote after commit
  auto_push: true
  # Create a pull request for each task branch
  auto_pr: true
  # IMPORTANT: auto_merge is disabled by default for safety.
  # Enable only if you want PRs merged automatically without review.
  auto_merge: false
  # Target branch for PRs (empty = repository default branch)
  pr_base_branch: ""
  # Merge strategy: merge, squash, rebase
  merge_strategy: squash

# GitHub integration
github:
  # GitHub token (prefer GITHUB_TOKEN env var)
  token: ""
  # Remote name
  remote: origin

# Report configuration (Markdown output)
report:
  # Enable/disable markdown report generation
  enabled: true
  # Base directory for report output
  base_dir: ".quorum/output"
  # Use UTC timestamps in reports
  use_utc: true
  # Include raw agent outputs in reports
  include_raw: true
